generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Profile {
  id           String   @id @db.Uuid
  created_at   DateTime @default(dbgenerated("now()")) @db.Timestamptz(6)
  name         String
  username     String   @unique
  avatar       String   @default("https://jsjanvtxqjlqjmlyxvlp.supabase.co/storage/v1/object/public/avatars//default_avatar.png")
  verified     Boolean  @default(false)
  bio          String?
  header_image String?
  website      String?
  location     String?

  following Followers[] @relation("Following")
  follower  Followers[] @relation("Follower")

  @@index([created_at, id, username])
  @@map("profiles")
}

model Followers {
  id             Int    @id @default(autoincrement())
  user_following String @db.Uuid
  user_to_follow String @db.Uuid

  following Profile @relation("Following", fields: [user_following], references: [id])
  follower  Profile @relation("Follower", fields: [user_to_follow], references: [id])

  @@index([id, user_following, user_to_follow])
  @@map("followers")
}
